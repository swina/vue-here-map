(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],p=0,u=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&u.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(u.length)u.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,s=1;s<r.length;s++){var l=r[s];0!==a[l]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},a={app:0},i=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/vue-here-map/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",[r("here-map",{attrs:{address:"5th Ave,New York,USA",colors:"green,red",infoBox:!0,ui:!0,interactive:!0,mode:"draw",drawFillColor:"rgba(0, 85, 170, 0.4)",drawStrokeColor:"#222",overlay:!0,overlaySrc:"https://source.unsplash.com/random/800x600?transparent",box:"bottom left"},on:{options:function(e){t.help=!t.help}}},[r("div",{attrs:{slot:"infoBox"},slot:"infoBox"},[r("p",[r("small",[t._v("Click on the map to set drawing coords/points")])])])])],1)])},i=[],o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"here-map-container"},[r("div",{ref:"map",style:"height:"+t.height+";border:2px solid black;",attrs:{id:"map"}}),t.$attrs.infoBox&&!t.loading?r("div",{class:t.infoClass},[t._t("infoBox")],2):t._e(),t.loading?r("div",{staticClass:"here-map-loading"},[t._v("Loading map ...")]):t._e(),t.options?r("svg",{staticStyle:{cursor:"pointer",position:"absolute",top:"2",right:"2","z-index":"19999"},attrs:{width:"16",height:"16",viewBox:"0 0 16 16",title:"Options"},on:{click:function(e){t.displayOptions=!t.displayOptions}}},[r("path",{staticClass:"path1",attrs:{d:"M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zM1.5 8c0-3.59 2.91-6.5 6.5-6.5 1.712 0 3.269 0.662 4.43 1.744l-6.43 2.756-2.756 6.43c-1.082-1.161-1.744-2.718-1.744-4.43zM9.143 9.143l-4.001 1.715 1.715-4.001 2.286 2.286zM8 14.5c-1.712 0-3.269-0.662-4.43-1.744l6.43-2.756 2.756-6.43c1.082 1.161 1.744 2.718 1.744 4.43 0 3.59-2.91 6.5-6.5 6.5z"}})]):t._e(),t.options?r("div",{staticClass:"here-map-loading",attrs:{title:"Info"}},[t.displayOptions?r("div",{staticStyle:{padding:".2rem"}},[t.options.traffic?r("small",[r("p",[t._v(t._s(t.options.traffic))])]):t._e(),t.options.routing?r("small",[r("p",[t._v(t._s(t.options.routing.title))]),r("p",{style:"color:"+this.colors[0]},[t._v(t._s(t.options.routing.from))]),r("p",{style:"color:"+this.colors[1]},[t._v(t._s(t.options.routing.to))])]):t._e()]):t._e()]):t._e(),t.$attrs.mode&&"draw"===t.$attrs.mode?r("div",{staticClass:"here-map-coords top left",attrs:{title:"click on the map to set the drawing points"}},[t._m(0),r("svg",{staticStyle:{"margin-right":".2rem"},attrs:{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",title:"Draw Mode"},on:{click:function(e){return t.$emit("click")}}},[r("g",[r("path",{attrs:{id:"svg_1",d:"m15.01919,3.33932l-1.73079,-1.08785c-0.43668,-0.2742 -1.01209,-0.14223 -1.28725,0.29455l-0.6822,1.08582l3.31108,2.07962l0.68274,-1.08532c0.27411,-0.4373 0.14329,-1.01323 -0.29358,-1.28682l0,0zm-9.59233,9.67354l3.31126,2.07959l5.39681,-8.59128l-3.31284,-2.08014l-5.39523,8.59182l0,0zm-0.50579,2.6422l-0.07313,1.95333l1.72814,-0.91407l1.60593,-0.84793l-3.19448,-2.00752l-0.06646,1.81619l0,0l0,0z","stroke-width":"1.5",stroke:"#000",fill:"#fff"}})])]),t.startDraw&&t.markers.length>1?r("button",{on:{click:t.drawPolyline}},[t._v("Draw Line")]):t._e(),t.startDraw&&t.coords.length>6?r("button",{on:{click:t.drawPolygon}},[t._v("Draw Polygon")]):t._e(),t.startDraw&&t.markers.length>1?r("button",{on:{click:t.overlayPicture}},[t._v("Overlay Image")]):t._e(),t.startDraw?t._e():r("button",{on:{click:t.getObjectData}},[t._v("Data")]),t.startDraw?t._e():r("button",{on:{click:t.removeRenderedGroup}},[t._v("Clear")])]):t._e(),t.showData&&t.$attrs.mode&&"draw"===t.$attrs.mode&&t.drawingPoints?r("div",{staticClass:"here-map-data",style:"opacity:"+t.heightData},[r("div",{staticStyle:{width:"100%","min-height":"10rem","text-align":"left","font-size":".8rem"}},[t._v(" <here-map "),r("br"),t._l(Object.keys(t.exportData),(function(e,n){return["mode"!=e?r("span",{key:"data-"+n},[t._v(" "+t._s(e)+' = "'+t._s(t.exportData[e])+'"'),r("br")]):t._e()]})),t._v(' draw = "'+t._s(t.drawingType)+'"'),r("br"),t._v(" drawCoords = "),r("span",[t._v('"'+t._s(t.drawingPoints.join(",\n"))+'"')]),t._v("/>"),r("p")],2),r("button",{on:{click:function(e){t.showData=!t.showData}}},[r("small",[t._v("Close")])])]):t._e()])},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"margin-right":".2rem"}},[r("small",[t._v("Draw Mode")])])}],l=(r("4160"),r("a15b"),r("d81d"),r("b64b"),r("ac1f"),r("1276"),r("159b"),r("53ca")),c=(r("96cf"),r("1da1")),d={name:"HereMap",data:function(){return{loading:!0,displayOptions:!1,platform:null,interactive:!1,ui:null,center:null,destination:null,map:null,startDraw:!0,drawOptions:!1,drawingMarkersGroup:null,renderedDrawingGroup:null,drawingType:null,drawingPoints:null,showData:!1,heightData:0,markers:[],coords:[],overlayImg:[],tags:["Start,End"],colors:["green","red"],exportData:null}},computed:{zoom:function(){return this.$attrs.zoom?this.$attrs.zoom:16},width:function(){return this.$attrs.width?this.$attrs.width+"px":parseInt(screen.width)+"px"},height:function(){return this.$attrs.height?this.$attrs.height:"610px"},infoClass:function(){return this.$attrs.box?"infoBox "+this.$attrs.box:"infoBox bottom-left"},options:function(){var t={};return this.$attrs.traffic&&(t.traffic="Traffic: ON"),this.$attrs.destination&&(t.routing={title:"Routing",from:this.$attrs.address,to:this.$attrs.destination}),t}},watch:{center:function(t){t.lat&&t.lng&&(this.createMap(t),this.$attrs.destination&&this.findAddress(this.$attrs.destination,"destination"))},destination:function(t){t.lat&&t.lng&&this.createRouting(t)},showData:function(t){this.heightData=t?"1":"0"}},methods:{init:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new H.service.Platform({apikey:"2zu5iPvqBZDvro3Zrt_tUSGiq7GxP_HmMbfETGeMhxs"});case 2:t.platform=e.sent,t.$attrs.tags&&(t.tags=t.$attrs.tags.split(",")),t.geoLocation();case 5:case"end":return e.stop()}}),e)})))()},createMap:function(t){var e=this,r=this.platform.createDefaultLayers(),n=new H.Map(this.$refs.map,r.vector.normal.map,{zoom:this.zoom,center:t,width:this.width,height:this.height,pixelRatio:window.devicePixelRatio||1});this.$attrs.traffic&&n.addLayer(r.vector.normal.traffic);new H.mapevents.Behavior(new H.mapevents.MapEvents(n));if("undefined"!=typeof this.$attrs.mode&&"draw"===this.$attrs.mode){e.drawingMarkersGroup=new H.map.Group,n.addEventListener("tap",(function(t){if(e.startDraw){var r=n.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY);e.markers.push({lat:r.lat,lng:r.lng}),e.coords.push(r.lat,r.lng,0);var a=new H.map.Icon(e.drawIcon()),i=new H.map.Marker(r,{icon:a});e.drawingMarkersGroup.addObject(i),n.addObject(e.drawingMarkersGroup)}}))}if(("undefined"!=typeof this.$attrs.overlay||"undefined"!=typeof this.$attrs.draw&&"overlay"===this.$attrs.draw)&&this.$attrs.overlaySrc&&function(){for(var t,r=0;r<=10;r++)t=new Image,t.crossOrigin="anonymous",t.src=e.$attrs.overlaySrc,e.overlayImg.push(t)}(),"undefined"===typeof this.$attrs.ui||this.$attrs.ui){var a=H.ui.UI.createDefault(n,r,window.navigator.userLanguage||window.navigator.language);this.ui=a}if(!this.$attrs.destination){this.$attrs.bubble&&this.setBubble(t,a,this.$attrs.bubble);var i=new H.map.Icon(this.markerIcon(0)),o=new H.map.Marker(t,{icon:i});n.addObject(o)}this.loading=!1,this.map=n,Object(l["a"])(this.$attrs.interactive)&&this.setInteractive(n),"undefined"!=typeof this.$attrs.draw&&(this.drawObject(),"undefined"!=typeof this.$attrs.drawInfo&&this.setBubble({lat:this.$attrs.drawCoords.split(",")[0],lng:this.$attrs.drawCoords.split(",")[1]},this.ui,this.$attrs.drawInfo))},createRouting:function(t){if(t.lat||t.lng){var e=this,r=[t.lat,t.lng],n=[this.center.lat,this.center.lng],a={routingMode:"fast",transportMode:"car",origin:n.join(","),destination:r.join(","),return:"polyline"},i=new H.map.Icon(e.markerIcon(0)),o=new H.map.Icon(e.markerIcon(1)),s=function(t){t.routes.length&&t.routes[0].sections.forEach((function(t){var r=H.geo.LineString.fromFlexiblePolyline(t.polyline),n=new H.map.Polyline(r,{style:{strokeColor:"#39d73e",lineWidth:5}}),a=new H.map.Marker(t.departure.place.location,{icon:i}),s=new H.map.Marker(t.arrival.place.location,{icon:o});e.map.addObjects([n,a,s]),e.map.getViewModel().setLookAtData({bounds:n.getBoundingBox()})}))},l=e.platform.getRoutingService(null,8);l.calculateRoute(a,s,(function(t){alert(t.message)}))}},findAddress:function(t,e){var r=this,n=this.platform.getSearchService();n.geocode({q:t},(function(t){"origin"===e?r.center=t.items[0].position:(r.destination=t.items[0].position,r.createRouting(r.destination))}))},geoLocation:function(){var t=this;function e(t,e){return r.apply(this,arguments)}function r(){return r=Object(c["a"])(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.findAddress(r,n);case 2:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}this.$attrs.origin&&(this.center={lat:this.$attrs.origin.split(",")[0],lng:this.$attrs.origin.split(",")[1]}),this.$attrs.endpoint&&(this.destination={lat:this.$attrs.endpoint.split(",")[0],lng:this.$attrs.endpoint.split(",")[1]}),this.$attrs.address&&e(this.$attrs.address,"origin")},markerIcon:function(t){return'<svg class="squish" width="24" height="52px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 72" fill="'+this.colors[t]+'"><path d="M24,0 C11.406,0 0,10.209 0,22.806 C0,35.4 10.407,50.436 24,72 C37.593,50.436 48,35.4 48,22.806 C48,10.209 36.597,0 24,0 L24,0 Z M24,33 C19.029,33 15,28.971 15,24 C15,19.029 19.029,15 24,15 C28.971,15 33,19.029 33,24 C33,28.971 28.971,33 24,33 L24,33 Z"></path></svg>'},drawIcon:function(){return'<svg width="10" height="10" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle cx="5" cy="5" r="4" fill="#333" stroke="#333" stroke-width="1"/></svg>'},setBubble:function(t,e,r){var n=new H.ui.InfoBubble(t,{content:r||this.tags[0]});e.addBubble(n)},setInteractive:function(t){var e=this,r=t.getBaseLayer().getProvider(),n=r.getStyle(),a=function t(a){n.getState()===H.map.Style.State.READY&&(n.removeEventListener("change",t),n.setInteractive(["places","places.populated-places"],!0),r.addEventListener("tap",e.onTap))};n.addEventListener("change",a)},onTap:function(t){if("undefined"===typeof this.$attrs.mode){var e=this.map.screenToGeo(t.currentPointer.viewportX,t.currentPointer.viewportY),r=t.target.getData().properties;if(r.population){var n='<div style="width:250px">'+(r.population?"Population: "+r.population:"")+(r.country_capital?"<br />Country Capital":"")+"</div>",a=this.interactive;a?(a.setPosition(e),a.setContent(n),a.open()):(a=new H.ui.InfoBubble(e,{content:n}),this.ui.addBubble(a))}}else"draw"===this.$attrs.mode&&(this.coords={lat:t.currentPointer.viewportX,lng:t.currentPointer.viewportY})},drawObject:function(){if(this.markers=this.$attrs.drawCoords.split(","),this.coords=this.markers,"line"===this.$attrs.draw&&this.drawPolyline(),"polygon"===this.$attrs.draw&&this.drawPolygon(),"overlay"===this.$attrs.draw){var t=this.$attrs.drawCoords.split(",");this.markers=[{lat:t[0],lng:t[1]},{lat:t[2],lng:t[3]}],this.overlayPicture()}},drawPolyline:function(){this.drawingType="line",this.startDraw=!this.startDraw;var t=this.coords,e=this;e.drawingPoints=[],e.drawingMarkersGroup&&e.drawingMarkersGroup.removeAll();var r=new H.geo.LineString(t);e.drawingPoints=t;var n=new H.map.Polyline(r,{style:{lineWidth:4,strokeColor:e.$attrs.drawStrokeColor||"#999"}});e.objectGroup(n)},drawPolygon:function(){this.drawingType="polygon",this.startDraw=!this.startDraw;var t=this.coords,e=this;e.drawingMarkersGroup&&e.drawingMarkersGroup.removeAll();var r=new H.geo.LineString(t,"values lat lng alt");e.drawingPoints=t;var n=new H.map.Polygon(r,{style:{fillColor:e.$attrs.drawFillColor||"rgba(0, 85, 170, 0.4)",strokeColor:e.$attrs.drawStrokeColor||"#555",lineWidth:4}});e.objectGroup(n)},overlayPicture:function(){this.drawingType="overlay",this.startDraw=!this.startDraw;var t=0,e=this;e.drawingMarkersGroup&&e.drawingMarkersGroup.removeAll();var r=[e.markers[0].lat,e.markers[0].lng,e.markers[1].lat,e.markers[1].lng];e.drawingPoints=r;var n=new H.map.Overlay(new H.geo.Rect(e.markers[0].lat,e.markers[0].lng,e.markers[1].lat,e.markers[1].lng),e.overlayImg[t],{volatility:!0}),a=new H.map.Group({volatility:!0,objects:[n]});e.renderedDrawingGroup=a,setInterval((function(){t=t<10?++t:0,n.setBitmap(e.overlayImg[t])}),250),e.map.addObject(a)},svgCircle:function(){return'<svg width="20" height="20" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="10" r="7" fill="transparent" stroke="red" stroke-width="4"/></svg>'},objectGroup:function(t){var e,r=this,n=new H.map.Group({visibility:!1}),a=new H.map.Group({volatility:!0,objects:[t,n]});!r.$attrs.draw&&(t.draggable=!0),r.renderedDrawingGroup=a,r.map.addObject(a),"undefined"===typeof r.$attrs.draw&&("line"===r.drawingType&&t.getGeometry().eachLatLngAlt((function(t,e,a,i){var o=new H.map.Marker({lat:t,lng:e},{icon:new H.map.Icon(r.svgCircle(),{anchor:{x:10,y:10}})});o.draggable=!0,o.setData({verticeIndex:i}),n.addObject(o)})),"polygon"===r.drawingType&&t.getGeometry().getExterior().eachLatLngAlt((function(t,e,a,i){var o=new H.map.Marker({lat:t,lng:e},{icon:new H.map.Icon(r.svgCircle(),{anchor:{x:10,y:10}})});o.draggable=!0,o.setData({verticeIndex:i}),n.addObject(o)})),a.addEventListener("pointerenter",(function(t){e&&(clearTimeout(e),e=null),n.setVisibility(!0)}),!0),a.addEventListener("pointerleave",(function(t){var r="touch"==t.currentPointer.type?1e3:0;e=setTimeout((function(){n.setVisibility(!1)}),r)}),!0),n.addEventListener("pointerenter",(function(t){document.body.style.cursor="pointer"}),!0),n.addEventListener("pointerleave",(function(t){document.body.style.cursor="default"}),!0),"line"===r.drawingType&&n.addEventListener("drag",(function(e){var n=e.currentPointer,a=t.getGeometry(),i=r.map.screenToGeo(n.viewportX,n.viewportY);e.target.setGeometry(i),a.removePoint(e.target.getData()["verticeIndex"]),a.insertPoint(e.target.getData()["verticeIndex"],i),t.setGeometry(a),e.stopPropagation(),r.drawingPoints=a.W}),!0),"polygon"===r.drawingType&&n.addEventListener("drag",(function(e){var n=e.currentPointer,a=t.getGeometry().getExterior(),i=r.map.screenToGeo(n.viewportX,n.viewportY);e.target.setGeometry(i),a.removePoint(e.target.getData()["verticeIndex"]),a.insertPoint(e.target.getData()["verticeIndex"],i),t.setGeometry(new H.geo.Polygon(a)),r.drawingPoints=a.W,e.stopPropagation()}),!0))},getObjectData:function(){var t=this;this.showData=!this.showData;var e=Object.keys(this.$attrs).map((function(e){return"overlay"!=t.drawingType?"overlay"!=e&&"overlaySrc"!=e?e:null:e}));this.exportData={},e.forEach((function(e){e&&(t.exportData[e]=t.$attrs[e])}))},removeRenderedGroup:function(){this.renderedDrawingGroup.removeAll(),this.coords=[],this.markers=[],this.drawingMarkersGroup=new H.map.Group,this.startDraw=!0,this.showData=!1}},mounted:function(){var t=this;this.$attrs.colors&&2===this.$attrs.colors.split(",").length&&(this.colors=this.$attrs.colors.split(",")),this.exportData=this.$attrs,this.$loadMapScript().then((function(e){t.init()})).catch((function(){console.log("Map Scripts not loaded")}))}},p=d,u=(r("9aef"),r("2877")),h=Object(u["a"])(p,o,s,!1,null,"101bde0a",null),g=h.exports,f={name:"App",components:{HereMap:g},data:function(){return{help:!1,mode:"default"}}},v=f,w=(r("034f"),Object(u["a"])(v,a,i,!1,null,null,null)),m=w.exports,y=(r("d3b7"),"https://js.api.here.com/v3/3.1/"),b="mapsjs.bundle.js",$="mapsjs-ui.css",k={install:function(t){t.LoadMapScript=t.prototype.$loadMapScript=function(){return new Promise((function(t,e){if(document.querySelector('script[src="'+y+b+'"]'))t();else{var r=document.createElement("SCRIPT");r.src=y+b,r.defer=!0,r.async=!0,r.type="module",r.addEventListener("load",t),r.addEventListener("error",e),r.addEventListener("abort",e),document.head.appendChild(r);var n=document.createElement("LINK"),a=y+$;n.setAttribute("href",a),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),document.head.appendChild(n)}}))},t.LoadMapScript=t.prototype.$unloadMapScript=function(){return new Promise((function(t,e){var r=document.querySelector('script[src="'+baseUrl+b+'"]');r?(document.head.removeChild(r),t()):e()}))}}},x=k;n["a"].use(x),n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(m)}}).$mount("#app")},"85ec":function(t,e,r){},"9aef":function(t,e,r){"use strict";var n=r("f8fa"),a=r.n(n);a.a},f8fa:function(t,e,r){}});
//# sourceMappingURL=app.29394202.js.map